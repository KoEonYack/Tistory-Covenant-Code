<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tistory.covenant.repository.MemberRepository">

    <insert id="saveMember" parameterType="com.tistory.covenant.vo.MemberVO">
        INSERT INTO member_test(id, username, nickname)
        VALUES ( #{id}
               , #{username}
               , #{nickname})
    </insert>

    <select id="getMemberV1" resultType="com.tistory.covenant.vo.MemberVO">
        SELECT
        id as id,
        username as username,
        nickname as nickname
        FROM
        member_test
        WHERE
            1=1
            <if test="username != null">
                AND username = #{username}
            </if>
            <if test="nickname != null">
                AND nickname = #{nickname}
            </if>
    </select>

    <select id="getMemberV2" resultType="com.tistory.covenant.vo.MemberVO">
        SELECT
            id as id,
            username as username,
            nickname as nickname
        FROM
            member_test
        <trim prefix="WHERE" prefixOverrides="AND">
            <if test="username != null">
                AND username = #{username}
            </if>
            <if test="nickname != null">
                AND nickname = #{nickname}
            </if>
        </trim>
    </select>
</mapper>